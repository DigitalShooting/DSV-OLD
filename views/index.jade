doctype html
html(lang="en" ng-app="dsv")
	head
		title DSV
			
		meta(name="viewport", content="width=device-width")
		
		link(href="/css/style.css", rel="stylesheet")
		
		// jquery
		script(src="/libs/jquery/dist/jquery.js")
		
		// bootstrap
		script(src="/libs/bootstrap/dist/js/bootstrap.min.js")
		
		// Angular
		script(src="/libs/angularjs/angular.min.js")
		script(src='/libs/angular-route/angular-route.js')
		script(src='/libs/angular-animate/angular-animate.min.js')
		script(src="/libs/md5/md5.js")
		
		// Socket io
		script(src="/socket.io/socket.io.js")
		script(src="/libs/angular-socket-io/socket.js")
		
		// Modules
		script(src='js/services/grafik.js')
		script(src='/js/services/timeFuctions.js')
		script(src='js/controllers/main.js')
		script(src='js/controllers/lines.js') 

	body(ng-controller="lines")
		table(class="navbar-cutsom navbar-default navbar-top" style="height:10%;")
			tr
				td(ng-controller="time")
					h4 Uhr
					h3(data-fittext data-fittext-max="30ex") {{time}}
					h4 {{date}}
		table(ng-hide="hidden")
			tr
				td
					div(class="alert alert-info" role="alert")
						b Keine Aktiven Stände 
						| Aktuell sind keine Stände Online
						
		table(style="height:90%;")
			tr(ng-repeat="rows in items" class="animate")
				td(ng-repeat="item in rows" class="animate top" style="border: solid 1px #dddddd;")
					div(ng-controller="team" ng-if="item.type == 'team'")
						//- div(class="col-xs-5 teamSum" style="background-color: {{team.manschaft | colorFromString}};")
						div(class="col-xs-3 teamSum")
							h1 {{team.hochrechnung}}
							h4 &Oslash; Ringe
						div(class="col-xs-9")
							h2 {{team.verein}} {{team.manschaft}}
							br
							div(class="grayBoxp" ng-hide="empty")
								table(class="table")
									tr
										td
											h2 {{team.progress}}%
										td
											h4 {{team.schnitt}} &Oslash;
										td
											h4 {{team.gesamt}} Ringe
					div(ng-controller="stand" ng-if="item.type == 'line'")
						div(class="standLabel")
							//- h1(style="background-color: {{data.user.manschaft | colorFromString}};") {{stand.labelShort}}
							h1 {{stand.labelShort}}
						
						div(class="col-xs-5")
							target(zoomlevel="zoomlevel" serie="serie.shots" selectedshotindex="selectedshotindex" scheibe="scheibe" probeecke="probeecke")
						div(class="col-xs-7")
							.col-xs-12
								h2 {{data.user.firstName}} {{data.user.lastName}}
								h4 {{data.user.verein}} {{data.user.manschaft}}
								br
								div(class="grayBoxp" ng-hide="empty")
									table
										tr
											td
												h1 {{activeShot.ring.display}} 
											td
												h4 {{session.anzahl}}.
									
									table
										tr
											td
												h4 {{session.schnitt}} &Oslash;
											td
												h2 {{session.gesamt}} Ringe
								br
								table(class="table")
									tr
										td(ng-repeat="serie in lastSerien track by $index" class="" )
											h2 {{serie.gesamt}}
			
		// Main JS init
		script.
			// env vars
			var scaleFactor = 4;
			//- var dscGatewayUrl = "#{dscGatewayUrl}"
			
			// init angular app
			angular.module("dsv", [
				"ds.services.grafik",
				"dsv.services.lines", "dsv.controllers.main",
				"ngAnimate",
			])
